<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Người dùng</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-4">
        <div class="card">
            <div class="card-body">
                <h2 class="text-center mb-4">Quản lý Người dùng</h2>

                <form class="mb-4">
                    <div class="mb-3">
                      <label>Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Tên">
                    </div>
                    <div class="mb-3">
                      <label>email</label>
                        <input type="email" class="form-control" id="email" placeholder="Email">
                    </div>
                    <div class="mb-3">
                      <label>Password</label>
                        <input type="password" class="form-control" id="password" placeholder="Mật khẩu">
                    </div>
                    <div class="mb-3">
                      <label>Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword" placeholder="Nhập lại mật khẩu">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Giới tính:</label>
                        
                    </div>
                    <div class="mb-3">
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" value="Nam" checked>
                        <label class="form-check-label">Nam</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" value="Nữ">
                        <label class="form-check-label">Nữ</label>
                    </div>
                    </div>
                    <button type="button" class="btn btn-primary " onclick="addUser()">Thêm người dùng</button>
                    <div id="error" class="text-danger mt-2"></div>
                </form>
                <h3>Danh Sach Nguoi Dung</h3>
                <table class="table table-striped table-bordered" id="userTable">
                    <thead>
                        <tr>
                            <th class="text-left">STT</th>
                            <th class="text-left">Tên</th>
                            <th class="text-left">Email</th>
                            <th class="text-left">Giới tính</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function loadUsers() {
            const users = JSON.parse(localStorage.getItem("users") || "[]");
            const tbody = document.querySelector("#userTable tbody");
            tbody.innerHTML = "";
            users.forEach((user, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td class="text-left">${index + 1}</td>
                    <td class="text-left">${user.name}</td>
                    <td class="text-left">${user.email}</td>
                    <td class="text-left">${user.gender}</td>
                    <td><button class="btn btn-danger btn-sm" onclick="deleteUser(${index})">Xoá</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        function addUser() {
            const name = document.getElementById("name").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirmPassword").value;
            const gender = document.querySelector("input[name='gender']:checked").value;
            const errorDiv = document.getElementById("error");

            if (!name || !email || !password || !confirmPassword) {
                errorDiv.innerText = "Vui lòng điền đầy đủ thông tin!";
                return;
            }

            if (password !== confirmPassword) {
                errorDiv.innerText = "Mật khẩu không khớp!";
                return;
            }

            const users = JSON.parse(localStorage.getItem("users") || "[]");
            users.push({ name, email, gender });
            localStorage.setItem("users", JSON.stringify(users));

            // Reset form
            document.getElementById("name").value = "";
            document.getElementById("email").value = "";
            document.getElementById("password").value = "";
            document.getElementById("confirmPassword").value = "";
            document.querySelector("input[name='gender'][value='Nam']").checked = true;
            errorDiv.innerText = "";

            loadUsers();
        }

        function deleteUser(index) {
            if (!confirm("Bạn có chắc chắn muốn xoá người dùng này?")) return;
            const users = JSON.parse(localStorage.getItem("users") || "[]");
            users.splice(index, 1);
            localStorage.setItem("users", JSON.stringify(users));
            loadUsers();
        }

        loadUsers();
    </script>
</body>
</html>
